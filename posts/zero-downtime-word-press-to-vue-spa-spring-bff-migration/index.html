<!doctype html><html lang=en-au><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Zero Downtime WordPress to Vue SPA & Spring BFF Migration</title><meta name=description content="An implemented proposal for how my team achieved zero downtime while migrating a WordPress website to a Vue SPA and Spring BFF in Kubernetes."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href=/app.min.6971480e00697d83fa19aaf3bb3c4b87e64dab10ea0bed6f2da39048a9e7d75e.css><link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel=stylesheet><link rel=sitemap type=application/xml href=https://tedman.dev/sitemap.xml><link rel=alternate type=application/rss+xml href=https://tedman.dev/rss.xml title="Daniel Tedman"><link type=text/plain rel=author href=https://tedman.dev/humans.txt><script async src=https://analytics.eu.umami.is/script.js data-website-id=b9e86c3d-5242-45d7-bb0d-96106efe9149></script></head><body><main><article><nav class=breadcrumbs><a href=/>Home</a>
<span>//</span>
<span>Posts</span></nav><h1>Zero Downtime WordPress to Vue SPA & Spring BFF Migration</h1><div class=metadata><div class=date>February 5, 2023</div><div class=topics><a href=https://tedman.dev/topics/case-study/>Case Study</a><a href=https://tedman.dev/topics/kubernetes/>Kubernetes</a><a href=https://tedman.dev/topics/spring-boot/>Spring Boot</a><a href=https://tedman.dev/topics/typescript/>TypeScript</a><a href=https://tedman.dev/topics/vue/>Vue</a><a href=https://tedman.dev/topics/wordpress/>WordPress</a></div></div><section class=abstract><p>An implemented proposal for how my team achieved zero downtime while migrating a WordPress website to a Vue SPA and Spring BFF in Kubernetes.</p></section><section class=toc><nav id=TableOfContents><ul><li><a href=#the-problem>The Problem</a></li><li><a href=#the-proposal>The Proposal</a></li><li><a href=#implementation>Implementation</a><ul><li><a href=#phase-1-vue-components>Phase 1: Vue Components</a></li><li><a href=#phase-2-token-authentication>Phase 2: Token Authentication</a></li><li><a href=#phase-3-spring-bff>Phase 3: Spring BFF</a></li><li><a href=#phase-4-replace-wordpress-wp-json-apis>Phase 4: Replace WordPress WP-JSON APIs</a></li><li><a href=#phase-5-remove-wordpress>Phase 5: Remove WordPress</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></section><section><h2 id=the-problem>The Problem</h2><p>WordPress provided fast development for a team familiar with the platform, but with a new team responsible for the application, and the limitations of WordPress for this kind of application beginning to show pains, a change was needed.</p><h2 id=the-proposal>The Proposal</h2><p>A proposal was made to the team for how we could move from our current implemented architecture, to a proposed <a href=https://developer.mozilla.org/en-US/docs/Glossary/SPA>SPA (Single-page Application)</a> and <a href=https://samnewman.io/patterns/architectural/bff/>BFF (Backend for Frontend)</a> architecture that better aligned with the teams technology choices and would support the current and future plans the team had for the application. The following <a href=#implementation>Implementation</a> aligns closely with the proposal, but is based on what was actually implemented.</p><h2 id=implementation>Implementation</h2><p>Implementation can be documented as a series of phases that represent releasable moments in time.</p><h3 id=phase-1-vue-components>Phase 1: Vue Components</h3><p>We begin by adding Vue support to WordPress, replacing a widget dashboard with a root Vue container inside a WordPress template. Data is provided to the widgets via WP-JSON APIs defined in WordPress.</p><h3 id=phase-2-token-authentication>Phase 2: Token Authentication</h3><p>To prepare for replacing WordPress, we need to adjust how our authentication architecture works. We can no longer rely on WordPress session, instead, we need to authenticate with Tokens granted by OIDC. This required development of custom token authentication that established a WordPress session, but did not require a traditional WordPress login.</p><h3 id=phase-3-spring-bff>Phase 3: Spring BFF</h3><p>WordPress is moved from the root path <code>/</code>, into a sub-path <code>/wp</code>. The root path <code>/</code> is now configured in Kubernetes to send traffic to a new Spring Boot application, our BFF. A single route <code>/</code> is defined that returns the <code>index.html</code> associated with Vue, along with a path to handle any static assets imported from this <code>index.html</code>.</p><h3 id=phase-4-replace-wordpress-wp-json-apis>Phase 4: Replace WordPress WP-JSON APIs</h3><p>Functionality defined within WordPress in WP-JSON APIs, are one by one redefined in our Spring BFF, then our Vue SPA is configured to talk to the new API path in the BFF.</p><h3 id=phase-5-remove-wordpress>Phase 5: Remove WordPress</h3><p>Now that all dependence on WordPress has been removed, we can safely remove WordPress from the deployment, codebase, and database.</p><h2 id=conclusion>Conclusion</h2><p>The application is now in a better state that better matches with the problems we are trying to solve with it, and is ready for the scope of known future expansion. Whist this approach worked for us, it would likely need to be handled differently if you relied more on posts or pages in WordPress, instead of a focus on a dashboard.</p></section></article></main><footer><nav><a href=https://tedman.dev/topics>topics</a>
<a href=https://tedman.dev/rss.xml>rss</a>
<a href=https://tedman.dev/.well-known/security.txt>security.txt</a>
<a href=https://tedman.dev/humans.txt>humans.txt</a>
<a href=https://github.com/dbtedman/tedman.dev/blob/main/LICENSE.md>license</a></nav></footer></body></html>